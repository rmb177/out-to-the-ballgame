// Generated by CoffeeScript 1.3.1
(function() {

  ottb.Datepicker = (function() {

    Datepicker.name = 'Datepicker';

    Datepicker.openingDay = new Date("4/5/2015");

    function Datepicker(dateChangedCallback) {
      var source;
      source = $("#datePickerUi").html();
      this.template = Handlebars.compile(source);
      this.dateChangedCallback = dateChangedCallback;
    }

    Datepicker.prototype.gotoNextDay = function() {
      var currentDate, nextDay;
      currentDate = new Date($("#datepicker").val());
      nextDay = new Date(currentDate);
      nextDay.setDate(currentDate.getDate() + 1);
      this.datepicker.datepicker("setDate", nextDay);
      return this.dateChangedCallback(nextDay);
    };

    Datepicker.prototype.getInitialMapDate = function() {
      var today;
      today = new Date;
      if (today > Datepicker.openingDay) {
        return today;
      } else {
        return Datepicker.openingDay;
      }
    };

    Datepicker.prototype.addToMap = function(map) {
      var _this = this;
      map.addDatePicker($(this.template())[0]);
      return setTimeout(function() {
        _this.datepicker = $("#datepicker");
        _this.datepicker.datepicker();
        _this.datepicker.datepicker("setDate", _this.getInitialMapDate());
        _this.dateChangedCallback(new Date(_this.datepicker.val()));
        _this.datepicker.change(function(event) {
          return _this.dateChangedCallback(new Date(_this.datepicker.val()));
        });
        return _this.datepicker.keyup(function(event) {
          return false;
        });
      }, 1000);
    };

    return Datepicker;

  })();

}).call(this);
